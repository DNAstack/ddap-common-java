{
  "version": "v0",
  "revision": "1",
  "commitTime": 1544824316,
  "trustedPassportIssuers": {
    "dbGaP": {
      "issuer": "https://dbgap.nlm.nih.gov/aa",
      "translateUsing": "dbgap"
    },
    "elixir": {
      "issuer": "https://login.elixir-czech.org/oidc/",
      "translateUsing": "elixir"
    },
    "nih": {
      "issuer": "https://login.nih.org/oidc/",
      "translateUsing": "dbgap"
    },
    "playgroundIC": {
      "issuer": "https://ic-dot-craigv-codelab.appspot.com/oidc"
    }
  },
  "trustedSources": {
    "elixir_institutes": {
      "sources": [
        "https://ga4gh.elixir-czech.org/claims"
      ],
      "claims": [
        "ga4gh.BonaFide",
        "^elixir.*"
      ]
    },
    "eu_universities": {
      "sources": [
        "https://uni-heidelberg.de"
      ],
      "claims": [
        "ga4gh.AcceptedTermsAndPolicies",
        "ga4gh.BonaFide"
      ]
    },
    "nih_institutes": {
      "sources": [
        "https://dbgap.nlm.nih.gov/aa",
        "https://nci.nih.org",
        "https://institute1.nih.gov",
        "https://institute2.nih.gov",
        "https://institute3.nih.gov",
        "https://institute4.nih.gov"
      ],
      "claims": [
        "^ga4gh.*",
        "^nih.*"
      ]
    },
    "research_companies": {
      "sources": [
        "https://ga4gh.google.com/claims",
        "https://ga4gh.dnastack.com/claims"
      ],
      "claims": [
        "ga4gh.AcceptedTermsAndPolicies",
        "ga4gh.BonaFide"
      ]
    },
    "the_broad": {
      "sources": [
        "https://ga4gh.broadinstitute.org"
      ]
    },
    "us_universities": {
      "sources": [
        "https://ga4gh.stanford.edu/claims"
      ],
      "claims": [
        "ga4gh.AcceptedTermsAndPolicies",
        "ga4gh.BonaFide"
      ]
    }
  },
  "policies": {
    "GRU": {
      "allow": {
        "dataUse": "DUO:0000005"
      }
    },
    "bona_fide": {
      "allow": {
        "anyTrue": [
          {
            "claim": "ga4gh.BonaFide",
            "values": [
              "https://www.nature.com/articles/s41431-018-0219-y"
            ],
            "from": [
              "nih_institutes",
              "eu_universities",
              "us_universities",
              "research_companies"
            ]
          },
          {
            "claim": "ga4gh.AcceptedTermsAndPolicies",
            "values": [
              "https://librarycard.broadinstitute.org/v1"
            ],
            "from": [
              "the_broad"
            ]
          }
        ]
      },
      "disallow": {
        "claim": "nih.Blacklisted",
        "values": [
          "true"
        ]
      }
    },
    "dac-1000-genomes": {
      "allow": {
        "claim": "ga4gh.ControlledAccessGrants",
        "is": "~=",
        "values": [
          "https?://dac\\.nih\\.gov/datasets/phys000709",
          "https?://dac\\.nih\\.gov/datasets/phys000710",
          "https?://dac\\.nih\\.gov/datasets/phys000711"
        ],
        "from": [
          "nih_institutes"
        ]
      }
    },
    "ethics": {
      "allow": {
        "claim": "ga4gh.AcceptedTermsAndPolicies",
        "values": [
          "https://www.nature.com/articles/s41431-018-0219-y"
        ]
      }
    }
  },
  "resources": {
    "thousand-genomes": {
      "state": "ACTIVE",
      "views": {
        "discovery-access": {
          "serviceTemplate": "beacon",
          "version": "Phase 3",
          "topic": "variants",
          "partition": "all",
          "fidelity": "discovery",
          "geoLocation": "gcp:na/us/us-central1/us-central1-a",
          "contentTypes": [
            "application/bam"
          ],
          "grants": [
            {
              "roles": {
                "discovery": {}
              },
              "items": [
                "https://gatekeeper-cafe-variome.staging.dnastack.com/beacon/query"
              ],
              "aud": "https://ga4gh-apis-beacon.dnastack.com"
            }
          ],
          "defaultRole": "discovery",
          "ui": {
            "label": "Beacon Discovery Access"
          }
        },
        "full-read-access": {
          "serviceTemplate": "gcs",
          "version": "Phase 3",
          "topic": "variants",
          "partition": "all",
          "fidelity": "normalized",
          "geoLocation": "gcp:na/us/us-central1/us-central1-a",
          "contentTypes": [
            "application/bam"
          ],
          "grants": [
            {
              "roles": {
                "viewer": {
                  "targetRoles": [
                    "projects/ga4gh-apis/roles/BeaconUser"
                  ],
                  "policies": [
                    "dac-1000-genomes"
                  ]
                }
              },
              "items": [
                "projects/ga4gh-apis/buckets/ga4gh-apis-controlled-access"
              ]
            }
          ],
          "defaultRole": "viewer",
          "ui": {
            "label": "Full File Read Access"
          }
        }
      },
      "maxTokenTtl": "7d",
      "ui": {
        "applyUrl": "http://apply.1000-genomes.org",
        "description": "Demo Controlled Access of 1000 Genomes",
        "imageUrl": "https://www.genengnews.com/wp-content/uploads/2018/08/Oct1_2015_ErnestoDelAguilaIII_1000GenomesProject9614313724-1.jpg",
        "infoUrl": "http://info.1000-genomes.org",
        "label": "1000 Genomes",
        "troubleshootUrl": "http://troubleshoot.1000-genomes.org"
      }
    },
    "thousand-genomes-copy": {
      "state": "ACTIVE",
      "views": {
        "discovery-access": {
          "serviceTemplate": "beacon",
          "version": "Phase 3",
          "topic": "variants",
          "partition": "all",
          "fidelity": "discovery",
          "geoLocation": "gcp:na/us/us-central1/us-central1-a",
          "contentTypes": [
            "application/bam"
          ],
          "grants": [
            {
              "roles": {
                "discovery": {}
              },
              "items": [
                "https://gatekeeper-cafe-variome.staging.dnastack.com/beacon/query"
              ],
              "aud": "https://ga4gh-apis-beacon.dnastack.com"
            }
          ],
          "defaultRole": "discovery",
          "ui": {
            "label": "Beacon Discovery Access"
          }
        },
        "full-read-access": {
          "serviceTemplate": "gcs",
          "version": "Phase 3",
          "topic": "variants",
          "partition": "all",
          "fidelity": "normalized",
          "geoLocation": "gcp:na/us/us-central1/us-central1-a",
          "contentTypes": [
            "application/bam"
          ],
          "grants": [
            {
              "roles": {
                "viewer": {
                  "targetRoles": [
                    "projects/ga4gh-apis/roles/BeaconUser"
                  ],
                  "policies": [
                    "dac-1000-genomes"
                  ]
                }
              },
              "items": [
                "projects/ga4gh-apis/buckets/ga4gh-apis-controlled-access"
              ]
            }
          ],
          "defaultRole": "viewer",
          "ui": {
            "label": "Full File Read Access"
          }
        }
      },
      "maxTokenTtl": "7d",
      "ui": {
        "applyUrl": "http://apply.1000-genomes.org",
        "description": "Demo Controlled Access of 1000 Genomes",
        "imageUrl": "https://www.genengnews.com/wp-content/uploads/2018/08/Oct1_2015_ErnestoDelAguilaIII_1000GenomesProject9614313724-1.jpg",
        "infoUrl": "http://info.1000-genomes.org",
        "label": "1000 Genomes",
        "troubleshootUrl": "http://troubleshoot.1000-genomes.org"
      }
    }
  },
  "clients": {
    "billing_test": {
      "clientId": "135d6a28-5508-493d-a45d-93f4fe02211b"
    },
    "craig_test": {
      "clientId": "1f8ff367-3950-48c2-9358-781f9adff70c"
    },
    "dnastack_fe": {
      "clientId": "b1aed96d-6367-4313-87a1-65eda4962a76"
    },
    "test_client": {
      "clientId": "903cfaeb-57d9-4ef6-5659-04377794ed64"
    },
    "test_page": {
      "clientId": "903cfaeb-57d9-4ef6-5659-04377794ed65"
    }
  },
  "serviceTemplates": {
    "beacon": {
      "targetAdapter": "token:jwt:gatekeeper",
      "itemFormat": "url",
      "inheritPolicies": [
        "bona_fide",
        "ethics"
      ],
      "interfaces": {
        "http:beacon": "${URL}"
      },
      "roles": {
        "basic_discovery": {
          "targetScopes": [
            "registered"
          ],
          "damRoleCategories": [
            "exists"
          ],
          "ui": {
            "description": "Query genome data and return 'found' or 'not found' status",
            "label": "Discovery Beacon Search without Metadata"
          }
        },
        "discovery": {
          "targetScopes": [
            "registered",
            "controlled"
          ],
          "damRoleCategories": [
            "metadata"
          ],
          "ui": {
            "description": "Query genome data and receive metadata results",
            "label": "Discovery Beacon Search with Metadata"
          }
        }
      },
      "ui": {
        "label": "Beacon Discovery Search"
      }
    },
    "bigquery": {
      "targetAdapter": "token:gcp:sa",
      "itemFormat": "bigquery",
      "inheritTargetScopes": [
        "https://www.googleapis.com/auth/cloud-platform"
      ],
      "interfaces": {
        "http:gcp:bq": "https://www.googleapis.com/bigquery/v1/projects/${PROJECT-ID}"
      },
      "roles": {
        "editor": {
          "targetRoles": [
            "roles/bigquery.dataEditor"
          ],
          "damRoleCategories": [
            "metadata",
            "list",
            "read",
            "write"
          ],
          "ui": {
            "description": "Query and modify tables and table metadata",
            "label": "BigQuery Editor"
          }
        },
        "viewer": {
          "targetRoles": [
            "roles/bigquery.dataViewer"
          ],
          "damRoleCategories": [
            "metadata",
            "list",
            "read"
          ],
          "ui": {
            "description": "Query tables and view table metadata",
            "label": "BigQuery Viewer"
          }
        }
      },
      "ui": {
        "label": "Google BigQuery"
      }
    },
    "gcs": {
      "targetAdapter": "token:gcp:sa",
      "itemFormat": "gcs",
      "inheritTargetScopes": [
        "https://www.googleapis.com/auth/cloud-platform"
      ],
      "interfaces": {
        "gcp:gs": "gs://${BUCKET-ID}",
        "http:gcp:gs": "https://www.googleapis.com/storage/v1/b/${BUCKET-ID}"
      },
      "roles": {
        "creator": {
          "targetRoles": [
            "roles/storage.objectCreator"
          ],
          "damRoleCategories": [
            "write"
          ],
          "ui": {
            "description": "Write files (without read access)",
            "label": "File Creator"
          }
        },
        "editor": {
          "targetRoles": [
            "roles/storage.objectViewer",
            "roles/storage.objectCreator"
          ],
          "damRoleCategories": [
            "metadata",
            "list",
            "read",
            "write"
          ],
          "ui": {
            "description": "Read and write files plus manipulate file metadata",
            "label": "File Editor"
          }
        },
        "viewer": {
          "targetRoles": [
            "roles/storage.objectViewer"
          ],
          "damRoleCategories": [
            "metadata",
            "list",
            "read"
          ],
          "ui": {
            "description": "List and read files",
            "label": "File Viewer"
          }
        }
      },
      "ui": {
        "label": "Google Cloud Storage"
      }
    },
    "views": {
      "targetAdapter": "token:aggregate:view",
      "itemFormat": "view",
      "roles": {
        "viewer": {
          "damRoleCategories": [
            "metadata",
            "list",
            "read"
          ],
          "ui": {
            "description": "Offers Viewer access across multiple views",
            "label": "Viewer"
          }
        }
      },
      "ui": {
        "label": "Multiple Resource Views"
      }
    }
  },
  "claimDefinitions": {
    "elixir.AffiliatedCountry": {
      "ui": {
        "label": "Elixir Affiliated Country"
      }
    },
    "ga4gh.AcceptedTermsAndPolicies": {
      "ui": {
        "label": "Accepted Terms and Policies"
      }
    },
    "ga4gh.AffiliationAndRole": {
      "ui": {
        "label": "Affiliation and Role"
      }
    },
    "ga4gh.BonaFide": {
      "ui": {
        "label": "Bona Fide"
      }
    },
    "ga4gh.ControlledAccessGrants": {
      "ui": {
        "label": "Controlled Access Grants"
      }
    },
    "nih.Blacklisted": {
      "ui": {
        "label": "NIH Blacklisted from Access"
      }
    }
  },
  "testPersonas": {
    "nci_researcher": {
      "idToken": {
        "standardClaims": {
          "iss": "https://login.nih.org/oidc/",
          "sub": "nci_researcher@nci.nih.gov"
        },
        "ga4ghClaims": [
          {
            "claimName": "ga4gh.BonaFide",
            "source": "https://nci.nih.org",
            "value": "https://www.nature.com/articles/s41431-018-0219-y",
            "iat": 1550120401,
            "exp": 2181272401,
            "by": "signing_official"
          },
          {
            "claimName": "ga4gh.AcceptedTermsAndPolicies",
            "source": "https://nci.nih.org",
            "value": "https://www.nature.com/articles/s41431-018-0219-y",
            "iat": 1550120402,
            "exp": 2181272402,
            "by": "self"
          }
        ]
      },
      "resources": {
        "thousand-genomes": {
          "access": [
            "discovery-access/discovery"
          ]
        },
        "thousand-genomes-copy": {
          "access": [
            "discovery-access/discovery"
          ]
        }
      },
      "state": "ACTIVE",
      "ui": {
        "label": "NCI Researcher"
      }
    }
  },
  "options": {
    "regexpConditions": true,
    "configReadOnly": true,
    "gcp": {
      "managedKeysMinTtl": "7d",
      "managedKeysPerAccount": 10,
      "serviceAccountProject": "craigv-codelab"
    }
  }
}